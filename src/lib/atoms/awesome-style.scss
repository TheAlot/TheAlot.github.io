$button-default-height: 44px;
$button-default-font-size: 14px;
$button-default-line-height: 24px;
$button-default-border-radius: 2px;
$button-default-placeholder-width: 120px;
$button-default-placeholder-font-color: rgba(0, 0, 0, 0.1);

$button-font-family: inherit;
$button-font-color: #ffffff;
$button-font-weight: 600;
$button-font-style: normal;
$button-hover-darken-opacity: 0.1;
$button-letter-spacing: 0px;
$button-horizontal-padding: 16px;

$button-raise-level: 2px;
$button-hover-pressure: 1;

$loading-transition-speed: 6s;
$loading-transition-timing: ease-out;
$transform-speed: 0.15s;

$button-icon-width: 44px;
$button-icon-height: $button-default-height;
$button-small-width: 88px;
$button-small-height: $button-default-height;
$button-medium-width: 136px;
$button-medium-height: $button-default-height;
$button-large-width: 192px;
$button-large-height: $button-default-height;

$button-primary-color: #1e88e5;
$button-primary-color-dark: darken($button-primary-color, 15%);
$button-primary-color-light: lighten($button-primary-color, 50%);
$button-primary-color-hover: darken($button-primary-color, 5%);
$button-primary-color-active: darken($button-primary-color, 10%);
$button-primary-border: none;

$button-anchor-color: #0e4f88;
$button-anchor-color-dark: darken($button-anchor-color, 15%);
$button-anchor-color-light: lighten($button-anchor-color, 75%);
$button-anchor-color-hover: darken($button-anchor-color, 2%);
$button-anchor-color-active: darken($button-anchor-color, 5%);
$button-anchor-border: none;

$button-secondary-color: #f2f6f9;
$button-secondary-color-dark: darken($button-primary-color, 15%);
$button-secondary-color-light: $button-primary-color;
$button-secondary-color-hover: darken($button-secondary-color, 5%);
$button-secondary-color-active: darken($button-secondary-color, 10%);
$button-secondary-border: 2px solid $button-primary-color;

$button-disabled-color: #afafaf;
$button-disabled-color-dark: darken($button-disabled-color, 15%);
$button-disabled-color-light: darken($button-disabled-color, 10%);
$button-disabled-color-hover: $button-disabled-color;
$button-disabled-color-active: $button-disabled-color;
$button-disabled-border: none;

$button-placeholder-color: #afafaf;
$button-placeholder-color-dark: darken($button-placeholder-color, 15%);
$button-placeholder-color-light: darken($button-placeholder-color, 10%);
$button-placeholder-color-hover: $button-placeholder-color;
$button-placeholder-color-active: $button-placeholder-color;
$button-placeholder-border: none;

%clear-spacing {
  padding: 0;
  margin: 0;
}

%clear-focus {
  outline-color: 0;
  outline-style: none;
  outline-width: 0;
}

%clear-selection {
  user-select: none;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  -webkit-tap-highlight-color: transparent;
}

%fill-parent {
  display: block;
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
}

@mixin button-hover-skew($direction) {
  &:before {
    transform: skewY(calc(1deg * var(--button-hover-pressure) * #{$direction}))
      translate3d(0, calc(-1px * var(--button-hover-pressure) / 2), 0);
  }
}

.root {
  @extend %clear-spacing;
  @extend %clear-focus;
  @extend %clear-selection;
  box-sizing: border-box;
  display: inline-block;
  vertical-align: middle;
  height: $button-default-height;
  position: relative;
  z-index: 1;
  background-color: transparent;
  font-size: $button-default-font-size;
  line-height: $button-default-line-height;
  font-weight: $button-font-weight;
  font-family: $button-font-family;
  font-style: $button-font-style;
  letter-spacing: $button-letter-spacing;
  text-rendering: auto;
  text-decoration: none;
  text-align: center;
  transition: opacity 0.1s ease-out;
  border: none;
  opacity: 0;
  -webkit-font-smoothing: antialiased;
  transform: translate3d(0, 0, 0);
  backface-visibility: hidden;

  .wrapper {
    position: relative;
    font-family: var(--button-font-family);
    display: flex;
    align-items: stretch;
    width: 100%;
    height: calc(100% - var(--button-raise-level));

    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    transform-style: preserve-3d;

    &:before {
      @extend %fill-parent;
      content: ' ';
      border-radius: var(--button-default-border-radius);
      top: auto;
      bottom: calc(var(--button-raise-level) * -1);
      z-index: 1;
      transition: transform var(--transform-speed) ease-out,
        background var(--transform-speed) ease-out;
    }
    &:after {
      @extend %fill-parent;
      content: ' ';
      background-color: rgba(0, 0, 0, 0.15);
      border-radius: var(--button-default-border-radius);
      z-index: 2;
      width: 0;
      top: var(--button-raise-level);
    }
  }

  .content {
    position: relative;
    display: flex;
    flex: 1;
    align-items: center;
    justify-content: center;
    border-radius: var(--button-default-border-radius);
    text-indent: 0;
    z-index: 1;
    overflow: hidden;
    padding: 0 var(--button-horizontal-padding);
    backface-visibility: hidden;
    transform-style: flat;
    transform: skew(0) translate3d(0, 0, 0);
    transition: border var(--transform-speed) ease-out,
      transform var(--transform-speed) ease-out,
      background var(--transform-speed) ease-out,
      color var(--transform-speed) ease-out;
    &:after {
      @extend %fill-parent;
    }
    > span:nth-child(1) {
      display: flex;
      align-items: center;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      transform: skew(0) translate3d(0, 0, 0);

      > svg {
        margin-top: -2px;
        margin-right: 3px;
      }
    }
  }
}

.left {
  @include button-hover-skew(1);
}

.right {
  @include button-hover-skew(-1);
}

.middle {
  &:before {
    transform: translate3d(0, calc(-1px * var(--button-hover-pressure)), 0);
  }
}
